<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<!-- Render All Elements Normally -->
		<link rel="stylesheet" href="css/normalize.css" />
		<!-- Font Awesome Library -->
		<link rel="stylesheet" href="css/all.min.css" />
		<!-- Main Template CSS File -->
		<link rel="stylesheet" href="css/global.css" />
		<link rel="stylesheet" href="css/cart.css" />
		<!-- google Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Cabin:ital,wght@0,400..700;1,400..700&display=swap"
			rel="stylesheet" />
		<title>Your Order</title>
		<script
			type="text/javascript"
			src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
		<script type="text/javascript">
			(function () {
				emailjs.init({
					publicKey: "Y6R8w8Ooh_3NRjRc9",
				});
			})();

			window.onload = function () {
				let isEmailSent = false;

				document
					.getElementById("contact-form")
					.addEventListener("submit", async function (event) {
						event.preventDefault();

						if (isEmailSent) return;

						isEmailSent = true;
						const submitButton = document.querySelector(".checkout-btn");
						submitButton.disabled = true;

						try {
							await emailjs.sendForm(
								"service_upc98dm",
								"template_qca63ue",
								this
							);
							console.log("SUCCESS!");

							const formEvent = new CustomEvent("formSubmitSuccess");
							document.dispatchEvent(formEvent);
						} catch (error) {
							console.log("FAILED...", error);
						} finally {
							submitButton.disabled = false;
							isEmailSent = false;
						}
					});
			};
		</script>
	</head>
	<body>
		<div class="order-progress">
			<div class="container">
				<p>
					<a href="shopping-cart.html">Shopping cart</a>
					<i class="fa-solid fa-arrow-right-long"></i>
					<span><a href="#">Checkout</a></span>
				</p>
			</div>
		</div>
		<div class="container form">
			<form class="login-form" id="contact-form">
				<h1>Billing details</h1>
				<div class="input-wrap">
					<div class="form-input-material">
						<input
							type="text"
							name="from_name"
							id="from_name"
							placeholder=" "
							autocomplete="off"
							class="form-control-material"
							required />
						<label for="from_name">First Name</label>
					</div>
					<div class="form-input-material">
						<input
							type="text"
							name="from_name1"
							id="from_name1"
							placeholder=" "
							autocomplete="off"
							class="form-control-material"
							required />
						<label for="from_name1">Second Name</label>
					</div>
				</div>
				<div class="input-wrap">
					<div class="form-input-material">
						<input
							type="number"
							name="number"
							id="number"
							placeholder=""
							autocomplete="off"
							class="form-control-material"
							required />
						<label for="number">Phone</label>
					</div>
					<div class="form-input-material">
						<input
							style="color: gray"
							type="text"
							name="contact_number"
							id="contact_number"
							placeholder=" "
							value=""
							autocomplete="off"
							class="form-control-material"
							readonly />
					</div>
				</div>
				<div class="input-wrap test"></div>
				<div class="form-input-material">
					<input
						type="email"
						name="from_email"
						id="from_email"
						placeholder=" "
						autocomplete="off"
						class="form-control-material"
						required />
					<label for="from_email">Email Address</label>
				</div>
				<div class="form-input-material">
					<input
						type="text"
						name="rate"
						id="rate"
						placeholder=""
						autocomplete="off"
						class="form-control-material"
						required />
					<label for="rate">Your Opinion</label>
				</div>
				<button type="submit" class="checkout-btn">Place Order</button>
			</form>
			<div class="cart-totals"></div>
		</div>
		<script type="module" src="js/global.js"></script>
		<script type="module" src="js/checkout.js"></script>
	</body>
</html>
